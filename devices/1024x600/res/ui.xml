<?xml version="1.0"?>

<recovery>
    <resources>
        <resource name="font" type="font" filename="bluehighway-25" />
        <resource name="base" type="image" filename="background" />
        <resource name="large_black" type="image" filename="large_black" />
        <resource name="small_black" type="image" filename="small_black" />
        <resource name="main_button" type="image" filename="button" />
        <resource name="file_icon" type="image" filename="file" />
        <resource name="folder_icon" type="image" filename="folder" />
        <resource name="slideout" type="image" filename="slideout" />
        <resource name="progress" type="animation" filename="indeterminate" />
        <resource name="progress_empty" type="image" filename="progress_empty" />
        <resource name="progress_full" type="image" filename="progress_fill" />
        <resource name="checkbox_false" type="image" filename="checkbox_empty" />
        <resource name="checkbox_true" type="image" filename="checkbox_checked" />
    </resources>

    <templates>
        <template name="header">
            <object type="image">
                <image resource="base" />
                <placement x="0" y="0" />
            </object>
    
            <object type="text" color="#A0A0A0">
                <font resource="font" />
                <placement x="250" y="5" />
                <text>Team Win Recovery Project (twrp)  v%tw_version%</text>
            </object>
    
            <object type="text" color="#A0A0A0">
                <font resource="font" />
                <placement x="250" y="30" />
                <text>Battery Level: %tw_battery%</text>
            </object>
    
            <object type="text" color="#A0A0A0">
                <font resource="font" />
                <placement x="450" y="35" />
                <text>%tw_time%</text>
            </object>
        </template>
    </templates>

    <pages>
        <page name="main">
            <object type="template" name="header" />

            <object type="image">
                <image resource="large_black" />
                <placement x="0" y="0" />
            </object>

            <object type="button">
                <placement x="23" y="127" />
                <font resource="font" color="black" />
                <text>Install</text>
                <image resource="main_button" />
                <action function="page">install</action>
            </object>

            <object type="button">
                <placement x="269" y="127" />
                <font resource="font" color="black" />
                <text>Backup</text>
                <image resource="main_button" />
                <action function="page">backup</action>
            </object>

            <object type="button">
                <placement x="515" y="127" />
                <font resource="font" color="black" />
                <text>Restore</text>
                <image resource="main_button" />
                <action function="page">restore</action>
            </object>

            <object type="button">
                <placement x="761" y="127" />
                <font resource="font" color="black" />
                <text>Wipe</text>
                <image resource="main_button" />
                <action function="page">wipe</action>
            </object>

            <object type="button">
                <placement x="23" y="388" />
                <font resource="font" color="black" />
                <text>Mount</text>
                <image resource="main_button" />
                <action function="page">mount</action>
            </object>

            <object type="button">
                <placement x="269" y="388" />
                <font resource="font" color="black" />
                <text>Reboot</text>
                <image resource="main_button" />
                <action function="page">reboot</action>
            </object>

            <object type="button">
                <placement x="515" y="388" />
                <font resource="font" color="black" />
                <text>Reload UI</text>
                <image resource="main_button" />
                <action function="reload"></action>
            </object>
        </page>

        <page name="install">
            <background color="black" />

            <object type="text" color="white">
                <font resource="header" />
                <placement x="100" y="15" />
                <text>Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="20" />
                <text>Team Win Recovery Project (twrp)  v%tw_version%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="50" />
                <text>Based on Android System Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="75" />
                <text>Battery Level: %tw_battery%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="650" y="75" />
                <text>%tw_time%</text>
            </object>

            <object type="fileselector">
                <placement x="20" y="175" w="482" h="195" />
                <icon folder="folder_icon" file="file_icon" />
                <background color="#303030" />
                <font resource="fixed" spacing="15" color="white" />
                <filter folders="1" files="0" />
                <path name="wd" default="/sdcard" />
                <data name="select" />
            </object>

            <object type="fileselector">
                <placement x="522" y="175" w="482" h="195" />
                <icon folder="folder_icon" file="file_icon" />
                <background color="#303030" />
                <font resource="fixed" spacing="15" color="white" />
                <filter extn=".zip" folders="0" files="1" />
                <path name="wd" />
                <data name="tw_filename" />
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="20" y="375" />
                <text>Selection: %tw_filename%</text>
            </object>

            <object type="button">
                <placement x="20" y="400" />
                <font resource="font" color="white" />
                <text>Flash</text>
                <image resource="main_button" />
                <action function="flash">flash_zip</action>
            </object>

            <object type="action">
                <touch key="back" />
                <action function="page">main</action>
            </object>

            <object type="action">
                <touch key="home" />
                <action function="page">main</action>
            </object>
        </page>

        <page name="reboot">
            <background color="black" />

            <object type="text" color="white">
                <font resource="header" />
                <placement x="100" y="15" />
                <text>Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="20" />
                <text>Team Win Recovery Project (twrp)  v%tw_version%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="50" />
                <text>Based on Android System Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="75" />
                <text>Battery Level: %tw_battery%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="650" y="75" />
                <text>%tw_time%</text>
            </object>

            <object type="button">
                <placement x="20" y="150" />
                <font resource="font" color="black" />
                <text>System</text>
                <image resource="main_button" />
                <action function="reboot">system</action>
            </object>

            <object type="button">
                <placement x="268" y="150" />
                <font resource="font" color="black" />
                <text>Power Off</text>
                <image resource="main_button" />
                <action function="reboot">poweroff</action>
            </object>

            <object type="button">
                <placement x="20" y="350" />
                <font resource="font" color="black" />
                <text>Recovery</text>
                <image resource="main_button" />
                <action function="reboot">recovery</action>
            </object>

            <object type="button">
                <placement x="268" y="350" />
                <font resource="font" color="black" />
                <text>Bootloader</text>
                <image resource="main_button" />
                <action function="reboot">bootloader</action>
            </object>

            <object type="action">
                <touch key="home" />
                <action function="page">main</action>
            </object>

            <object type="action">
                <touch key="back" />
                <action function="page">main</action>
            </object>
        </page>

        <page name="mount">
            <background color="black" />

            <object type="text" color="white">
                <font resource="header" />
                <placement x="100" y="15" />
                <text>Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="20" />
                <text>Team Win Recovery Project (twrp)  v%tw_version%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="50" />
                <text>Based on Android System Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="75" />
                <text>Battery Level: %tw_battery%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="650" y="75" />
                <text>%tw_time%</text>
            </object>

            <object type="button">
                <placement x="20" y="150" />
                <font resource="font" color="black" />
                <text>Mount USB Storage</text>
                <image resource="main_button" />
                <action function="page">usb_mount</action>
            </object>

            <object type="action">
                <touch key="home" />
                <action function="page">main</action>
            </object>

            <object type="action">
                <touch key="back" />
                <action function="page">main</action>
            </object>
        </page>

        <page name="usb_mount">
            <background color="black" />

            <object type="text" color="white">
                <font resource="header" />
                <placement x="100" y="15" />
                <text>Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="20" />
                <text>Team Win Recovery Project (twrp)  v%tw_version%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="50" />
                <text>Based on Android System Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="75" />
                <text>Battery Level: %tw_battery%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="650" y="75" />
                <text>%tw_time%</text>
            </object>

            <object type="button">
                <placement x="20" y="150" />
                <font resource="font" color="black" />
                <text>Unmount</text>
                <image resource="main_button" />
                <action function="page">usb_umount</action>
            </object>

            <object type="action">
                <action function="mount">usb</action>
            </object>
        </page>

        <page name="usb_umount">
            <object type="action">
                <action function="unmount">usb</action>
            </object>

            <object type="action">
                <action function="page">mount</action>
            </object>
        </page>

        <page name="flash_zip">
            <background color="black" />

            <object type="text" color="white">
                <font resource="header" />
                <placement x="100" y="15" />
                <text>Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="20" />
                <text>Team Win Recovery Project (twrp)  v%tw_version%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="50" />
                <text>Based on Android System Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="75" />
                <text>Battery Level: %tw_battery%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="650" y="75" />
                <text>%tw_time%</text>
            </object>

            <object type="console">
                <placement x="0" y="150" w="540" h="390" />
                <color foreground="#B0B0B0" background="black" scroll="black" />
                <font resource="fixed" />
            </object>

            <object type="progressbar">
                <placement x="386" y="560" />
                <resource  empty="progress_empty" full="progress_full" />
                <data name="ui_progress" />
            </object>

            <object type="animation">
                <placement x="386" y="560" />
                <resource name="progress" />
                <speed fps="15" render="2" />
                <loop frame="1" />
            </object>

            <object type="action">
                <condition var1="tw_operation_state" var2="1" />
                <action function="page">flash_done</action>
            </object>
        </page>

        <page name="flash_done">
            <background color="black" />

            <object type="text" color="white">
                <font resource="header" />
                <placement x="100" y="15" />
                <text>Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="20" />
                <text>Team Win Recovery Project (twrp)  v%tw_version%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="50" />
                <text>Based on Android System Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="75" />
                <text>Battery Level: %tw_battery%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="650" y="75" />
                <text>%tw_time%</text>
            </object>

            <object type="console">
                <placement x="0" y="150" w="1024" h="280" />
                <color foreground="#B0B0B0" background="black" scroll="black" />
                <font resource="fixed" />
            </object>

            <object type="button">
                <placement x="20" y="450" />
                <font resource="font" color="white" />
                <text>Main Menu</text>
                <image resource="main_button" />
                <action function="page">main</action>
            </object>
        </page>

        <page name="wipe">
            <background color="black" />

            <object type="text" color="white">
                <font resource="header" />
                <placement x="100" y="15" />
                <text>Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="20" />
                <text>Team Win Recovery Project (twrp)  v%tw_version%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="50" />
                <text>Based on Android System Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="75" />
                <text>Battery Level: %tw_battery%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="650" y="75" />
                <text>%tw_time%</text>
            </object>

            <object type="button">
                <placement x="20" y="150" />
                <font resource="font" color="black" />
                <text>Cache</text>
                <image resource="main_button" />
                <action function="page">wipe_cache</action>
            </object>

            <object type="button">
                <placement x="268" y="150" />
                <font resource="font" color="black" />
                <text>Dalvik Cache</text>
                <image resource="main_button" />
                <action function="page">wipe_dalvik</action>
            </object>

            <object type="button">
                <placement x="516" y="150" />
                <font resource="font" color="black" />
                <text>Factory Reset</text>
                <image resource="main_button" />
                <action function="page">wipe_data</action>
            </object>

            <object type="button">
                <placement x="764" y="150" />
                <font resource="font" color="black" />
                <text>Battery Stats</text>
                <image resource="main_button" />
                <action function="page">wipe_battery</action>
            </object>

            <object type="button">
                <placement x="20" y="350" />
                <font resource="font" color="black" />
                <text>Rotation</text>
                <image resource="main_button" />
                <action function="page">wipe_rotate</action>
            </object>

            <object type="button">
                <placement x="268" y="350" />
                <font resource="font" color="black" />
                <text>System</text>
                <image resource="main_button" />
                <action function="page">wipe_system</action>
            </object>

            <object type="button">
                <placement x="516" y="350" />
                <font resource="font" color="black" />
                <text>SD Card</text>
                <image resource="main_button" />
                <action function="page">wipe_sdcard</action>
            </object>

            <object type="button">
                <placement x="764" y="350" />
                <font resource="font" color="black" />
                <text>SD Ext</text>
                <image resource="main_button" />
                <action function="page">wipe_sdext</action>
            </object>

            <object type="action">
                <touch key="home" />
                <action function="page">main</action>
            </object>

            <object type="action">
                <touch key="back" />
                <action function="page">main</action>
            </object>
        </page>

        <page name="wipe_system">
            <object type="template" name="header" />

            <object type="progressbar">
                <placement x="386" y="290" />
                <resource  empty="progress_empty" full="progress_full" />
                <data name="ui_progress" />
            </object>

            <object type="animation">
                <placement x="386" y="290" />
                <resource name="progress" />
                <speed fps="15" render="2" />
                <loop frame="1" />
            </object>

            <object type="action">
                <condition var1="tw_operation_state" var2="1" />
                <action function="page">wipe_done</action>
            </object>

            <object type="action">
                <action function="wipe">/system</action>
            </object>
        </page>

        <page name="wipe_sdcard">
            <object type="template" name="header" />

            <object type="progressbar">
                <placement x="386" y="290" />
                <resource  empty="progress_empty" full="progress_full" />
                <data name="ui_progress" />
            </object>

            <object type="animation">
                <placement x="386" y="290" />
                <resource name="progress" />
                <speed fps="15" render="2" />
                <loop frame="1" />
            </object>

            <object type="action">
                <condition var1="tw_operation_state" var2="1" />
                <action function="page">wipe_done</action>
            </object>

            <object type="action">
                <action function="wipe">/sdcard</action>
            </object>
        </page>

        <page name="wipe_sdext">
            <object type="template" name="header" />

            <object type="progressbar">
                <placement x="386" y="290" />
                <resource  empty="progress_empty" full="progress_full" />
                <data name="ui_progress" />
            </object>

            <object type="animation">
                <placement x="386" y="290" />
                <resource name="progress" />
                <speed fps="15" render="2" />
                <loop frame="1" />
            </object>

            <object type="action">
                <condition var1="tw_operation_state" var2="1" />
                <action function="page">wipe_done</action>
            </object>

            <object type="action">
                <action function="wipe">/sd-ext</action>
            </object>
        </page>

        <page name="wipe_cache">
            <object type="template" name="header" />

            <object type="progressbar">
                <placement x="386" y="290" />
                <resource  empty="progress_empty" full="progress_full" />
                <data name="ui_progress" />
            </object>

            <object type="animation">
                <placement x="386" y="290" />
                <resource name="progress" />
                <speed fps="15" render="2" />
                <loop frame="1" />
            </object>

            <object type="action">
                <condition var1="tw_operation_state" var2="1" />
                <action function="page">wipe_done</action>
            </object>

            <object type="action">
                <action function="wipe">/cache</action>
            </object>
        </page>

        <page name="wipe_dalvik">
            <background color="black" />

            <object type="text" color="white">
                <font resource="header" />
                <placement x="100" y="15" />
                <text>Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="20" />
                <text>Team Win Recovery Project (twrp)  v%tw_version%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="50" />
                <text>Based on Android System Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="75" />
                <text>Battery Level: %tw_battery%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="650" y="75" />
                <text>%tw_time%</text>
            </object>

            <object type="progressbar">
                <placement x="386" y="290" />
                <resource  empty="progress_empty" full="progress_full" />
                <data name="ui_progress" />
            </object>

            <object type="animation">
                <placement x="386" y="290" />
                <resource name="progress" />
                <speed fps="15" render="2" />
                <loop frame="1" />
            </object>

            <object type="action">
                <condition var1="tw_operation_state" var2="1" />
                <action function="page">wipe_done</action>
            </object>

            <object type="action">
                <action function="wipe">dalvik</action>
            </object>
        </page>

        <page name="wipe_rotate">
            <background color="black" />

            <object type="text" color="white">
                <font resource="header" />
                <placement x="100" y="15" />
                <text>Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="20" />
                <text>Team Win Recovery Project (twrp)  v%tw_version%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="50" />
                <text>Based on Android System Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="75" />
                <text>Battery Level: %tw_battery%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="650" y="75" />
                <text>%tw_time%</text>
            </object>

            <object type="progressbar">
                <placement x="386" y="290" />
                <resource  empty="progress_empty" full="progress_full" />
                <data name="ui_progress" />
            </object>

            <object type="animation">
                <placement x="386" y="290" />
                <resource name="progress" />
                <speed fps="15" render="2" />
                <loop frame="1" />
            </object>

            <object type="action">
                <condition var1="tw_operation_state" var2="1" />
                <action function="page">wipe_done</action>
            </object>

            <object type="action">
                <action function="wipe">rotate</action>
            </object>
        </page>

        <page name="wipe_data">
            <background color="black" />

            <object type="text" color="white">
                <font resource="header" />
                <placement x="100" y="15" />
                <text>Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="20" />
                <text>Team Win Recovery Project (twrp)  v%tw_version%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="50" />
                <text>Based on Android System Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="75" />
                <text>Battery Level: %tw_battery%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="650" y="75" />
                <text>%tw_time%</text>
            </object>

            <object type="progressbar">
                <placement x="386" y="290" />
                <resource  empty="progress_empty" full="progress_full" />
                <data name="ui_progress" />
            </object>

            <object type="animation">
                <placement x="386" y="290" />
                <resource name="progress" />
                <speed fps="15" render="2" />
                <loop frame="1" />
            </object>

            <object type="action">
                <condition var1="tw_operation_state" var2="1" />
                <action function="page">wipe_done</action>
            </object>

            <object type="action">
                <action function="wipe">data</action>
            </object>
        </page>


        <page name="wipe_battery">
            <background color="black" />

            <object type="text" color="white">
                <font resource="header" />
                <placement x="100" y="15" />
                <text>Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="20" />
                <text>Team Win Recovery Project (twrp)  v%tw_version%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="50" />
                <text>Based on Android System Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="75" />
                <text>Battery Level: %tw_battery%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="650" y="75" />
                <text>%tw_time%</text>
            </object>

            <object type="progressbar">
                <placement x="386" y="290" />
                <resource  empty="progress_empty" full="progress_full" />
                <data name="ui_progress" />
            </object>

            <object type="animation">
                <placement x="386" y="290" />
                <resource name="progress" />
                <speed fps="15" render="2" />
                <loop frame="1" />
            </object>

            <object type="action">
                <condition var1="tw_operation_state" var2="1" />
                <action function="page">wipe_done</action>
            </object>

            <object type="action">
                <action function="wipe">battery</action>
            </object>
        </page>

        <page name="wipe_done">
            <background color="black" />

            <object type="text" color="white">
                <font resource="header" />
                <placement x="100" y="15" />
                <text>Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="20" />
                <text>Team Win Recovery Project (twrp)  v%tw_version%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="50" />
                <text>Based on Android System Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="75" />
                <text>Battery Level: %tw_battery%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="650" y="75" />
                <text>%tw_time%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="20" y="200" />
                <text>Wipe complete</text>
            </object>

            <object type="button">
                <placement x="20" y="350" />
                <font resource="font" color="white" />
                <text>Back</text>
                <image resource="main_button" />
                <action function="page">wipe</action>
            </object>

            <object type="action">
                <touch key="home" />
                <action function="page">main</action>
            </object>

            <object type="action">
                <touch key="back" />
                <action function="page">wipe</action>
            </object>
        </page>

        <page name="backup">
            <background color="black" />

            <object type="text" color="white">
                <font resource="header" />
                <placement x="100" y="15" />
                <text>Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="20" />
                <text>Team Win Recovery Project (twrp)  v%tw_version%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="50" />
                <text>Based on Android System Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="75" />
                <text>Battery Level: %tw_battery%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="650" y="75" />
                <text>%tw_time%</text>
            </object>

            <object type="button">
                <placement x="20" y="150" />
                <font resource="font" color="black" />
                <text>Backup now</text>
                <image resource="main_button" />
                <action function="page">backup_run</action>
            </object>

            <object type="checkbox">
                <placement x="516" y="150" />
                <font resource="font" color="white" />
                <text>System</text>
                <data variable="tw_backup_system" />
                <image checked="checkbox_true" unchecked="checkbox_false" />
            </object>

            <object type="checkbox">
                <placement x="516" y="225" />
                <font resource="font" color="white" />
                <text>Data</text>
                <data variable="tw_backup_data" />
                <image checked="checkbox_true" unchecked="checkbox_false" />
            </object>

            <object type="checkbox">
                <placement x="516" y="300" />
                <font resource="font" color="white" />
                <text>Boot</text>
                <data variable="tw_backup_boot" />
                <image checked="checkbox_true" unchecked="checkbox_false" />
            </object>

            <object type="checkbox">
                <placement x="516" y="375" />
                <font resource="font" color="white" />
                <text>Recovery</text>
                <data variable="tw_backup_recovery" />
                <image checked="checkbox_true" unchecked="checkbox_false" />
            </object>

            <object type="checkbox">
                <placement x="516" y="450" />
                <font resource="font" color="white" />
                <text>Cache</text>
                <data variable="tw_backup_cache" />
                <image checked="checkbox_true" unchecked="checkbox_false" />
            </object>

            <object type="checkbox">
                <placement x="764" y="150" />
                <font resource="font" color="white" />
                <text>.android_secure</text>
                <condition var1="fileexists" var2="/sdcard/.android_secure" />
                <data variable="tw_backup_andsec" />
                <image checked="checkbox_true" unchecked="checkbox_false" />
            </object>

            <object type="checkbox">
                <placement x="764" y="225" />
                <font resource="font" color="white" />
                <text>sd-ext</text>
                <condition var1="fileexists" var2="/sd-ext" />
                <data variable="tw_backup_sdext" />
                <image checked="checkbox_true" unchecked="checkbox_false" />
            </object>

            <object type="checkbox">
                <placement x="20" y="350" />
                <font resource="font" color="white" />
                <text>Enable Compression (Requires more time)</text>
                <data variable="tw_use_compression" />
                <image checked="checkbox_true" unchecked="checkbox_false" />
            </object>

            <object type="action">
                <touch key="home" />
                <action function="page">main</action>
            </object>

            <object type="action">
                <touch key="back" />
                <action function="page">main</action>
            </object>
        </page>

        <page name="backup_run">
            <background color="black" />

            <object type="text" color="white">
                <font resource="header" />
                <placement x="100" y="15" />
                <text>Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="20" />
                <text>Team Win Recovery Project (twrp)  v%tw_version%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="50" />
                <text>Based on Android System Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="75" />
                <text>Battery Level: %tw_battery%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="650" y="75" />
                <text>%tw_time%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="512" y="200" placement="4" />
                <text>%tw_operation% %tw_partition%</text>
            </object>

            <object type="progressbar">
                <placement x="386" y="230" />
                <resource  empty="progress_empty" full="progress_full" />
                <data name="ui_progress" />
            </object>

            <object type="animation">
                <placement x="386" y="230" />
                <resource name="progress" />
                <speed fps="15" render="2" />
                <loop frame="1" />
            </object>

            <object type="action">
                <condition var1="tw_operation_state" var2="1" />
                <action function="page">backup_done</action>
            </object>

            <object type="action">
                <action function="nandroid">backup</action>
            </object>
        </page>

        <page name="backup_done">
            <object type="action">
                <condition var1="tw_operation_status" var2="0" />
                <action function="page">backup_success</action>
            </object>

            <object type="action">
                <condition var1="tw_operation_status" var2="1" />
                <action function="page">backup_failed</action>
            </object>
        </page>

        <page name="backup_success">
            <background color="black" />

            <object type="text" color="white">
                <font resource="header" />
                <placement x="100" y="15" />
                <text>Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="20" />
                <text>Team Win Recovery Project (twrp)  v%tw_version%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="50" />
                <text>Based on Android System Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="75" />
                <text>Battery Level: %tw_battery%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="650" y="75" />
                <text>%tw_time%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="20" y="150" />
                <text>Your backup was successful!</text>
            </object>

            <object type="button">
                <placement x="20" y="350" />
                <font resource="font" color="white" />
                <text>Main Menu</text>
                <image resource="main_button" />
                <action function="page">main</action>
            </object>
        </page>

        <page name="backup_failed">
            <background color="black" />

            <object type="text" color="white">
                <font resource="header" />
                <placement x="100" y="15" />
                <text>Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="20" />
                <text>Team Win Recovery Project (twrp)  v%tw_version%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="50" />
                <text>Based on Android System Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="75" />
                <text>Battery Level: %tw_battery%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="650" y="75" />
                <text>%tw_time%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="20" y="150" />
                <text>Your backup failed.</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="20" y="200" />
                <text>Pull up the console for more details</text>
            </object>

            <object type="button">
                <placement x="20" y="350" />
                <font resource="font" color="white" />
                <text>Main Menu</text>
                <image resource="main_button" />
                <action function="page">main</action>
            </object>

            <object type="console">
                <slideout resource="slideout" x="482" y="560" />
                <placement x="0" y="0" w="1024" h="600" />
                <color foreground="#B0B0B0" background="black" scroll="black" />
                <font resource="fixed" />
            </object>
        </page>

        <page name="restore">
            <background color="black" />

            <object type="text" color="white">
                <font resource="header" />
                <placement x="100" y="15" />
                <text>Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="20" />
                <text>Team Win Recovery Project (twrp)  v%tw_version%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="50" />
                <text>Based on Android System Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="75" />
                <text>Battery Level: %tw_battery%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="650" y="75" />
                <text>%tw_time%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="20" y="150" />
                <text>Select packge to restore</text>
            </object>

            <object type="fileselector">
                <placement x="20" y="175" w="482" h="195" />
                <icon folder="folder_icon" file="file_icon" />
                <background color="#303030" />
                <font resource="fixed" spacing="15" color="white" />
                <filter folders="1" files="0" nav="0" />
                <path name="tw_backups_folder" />
                <data name="tw_restore" default="" />
            </object>

            <object type="action">
                <condition var1="tw_restore" op="modified" />
                <action function="page">restore_setrestoredata</action>
            </object>

            <object type="action">
                <touch key="home" />
                <action function="page">main</action>
            </object>

            <object type="action">
                <touch key="back" />
                <action function="page">main</action>
            </object>
        </page>

        <page name="restore_setrestoredata">
            <object type="action">
                <action function="readBackup"></action>
            </object>

            <object type="action">
                <action function="page">restore_select</action>
            </object>
        </page>

        <page name="restore_select">
            <background color="black" />

            <object type="text" color="white">
                <font resource="header" />
                <placement x="100" y="15" />
                <text>Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="20" />
                <text>Team Win Recovery Project (twrp)  v%tw_version%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="50" />
                <text>Based on Android System Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="75" />
                <text>Battery Level: %tw_battery%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="650" y="75" />
                <text>%tw_time%</text>
            </object>

            <object type="button">
                <placement x="20" y="150" />
                <font resource="font" color="black" />
                <text>Restore  now</text>
                <image resource="main_button" />
                <action function="page">restore_run</action>
            </object>

            <object type="checkbox">
                <placement x="516" y="150" />
                <font resource="font" color="white" />
                <text>System</text>
                <condition var1="tw_restore_system" op=">=" var2="0" />
                <data variable="tw_restore_system" />
                <image checked="checkbox_true" unchecked="checkbox_false" />
            </object>

            <object type="checkbox">
                <placement x="516" y="225" />
                <font resource="font" color="white" />
                <text>Data</text>
                <condition var1="tw_restore_data" op=">=" var2="0" />
                <data variable="tw_restore_data" />
                <image checked="checkbox_true" unchecked="checkbox_false" />
            </object>

            <object type="checkbox">
                <placement x="516" y="300" />
                <font resource="font" color="white" />
                <text>Boot</text>
                <condition var1="tw_restore_boot" op=">=" var2="0" />
                <data variable="tw_restore_boot" />
                <image checked="checkbox_true" unchecked="checkbox_false" />
            </object>

            <object type="checkbox">
                <placement x="516" y="375" />
                <font resource="font" color="white" />
                <text>Recovery</text>
                <condition var1="tw_restore_recovery" op=">=" var2="0" />
                <data variable="tw_restore_recovery" />
                <image checked="checkbox_true" unchecked="checkbox_false" />
            </object>

            <object type="checkbox">
                <placement x="516" y="450" />
                <font resource="font" color="white" />
                <text>Cache</text>
                <condition var1="tw_restore_cache" op=">=" var2="0" />
                <data variable="tw_restore_cache" />
                <image checked="checkbox_true" unchecked="checkbox_false" />
            </object>

            <object type="checkbox">
                <placement x="764" y="150" />
                <font resource="font" color="white" />
                <text>.android_secure</text>
                <condition var1="tw_restore_andsec" op=">=" var2="0" />
                <data variable="tw_restore_andsec" />
                <image checked="checkbox_true" unchecked="checkbox_false" />
            </object>

            <object type="checkbox">
                <placement x="764" y="225" />
                <font resource="font" color="white" />
                <text>sd-ext</text>
                <condition var1="tw_restore_sdext" op=">=" var2="0" />
                <data variable="tw_restore_sdext" />
                <image checked="checkbox_true" unchecked="checkbox_false" />
            </object>

            <object type="action">
                <touch key="home" />
                <action function="page">main</action>
            </object>

            <object type="action">
                <touch key="back" />
                <action function="page">main</action>
            </object>
        </page>

        <page name="restore_run">
            <background color="black" />

            <object type="text" color="white">
                <font resource="header" />
                <placement x="100" y="15" />
                <text>Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="20" />
                <text>Team Win Recovery Project (twrp)  v%tw_version%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="50" />
                <text>Based on Android System Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="75" />
                <text>Battery Level: %tw_battery%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="650" y="75" />
                <text>%tw_time%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="512" y="200" placement="4" />
                <text>%tw_operation% %tw_partition%</text>
            </object>

            <object type="progressbar">
                <placement x="386" y="230" />
                <resource  empty="progress_empty" full="progress_full" />
                <data name="ui_progress" />
            </object>

            <object type="animation">
                <placement x="386" y="230" />
                <resource name="progress" />
                <speed fps="15" render="2" />
                <loop frame="1" />
            </object>

            <object type="action">
                <condition var1="tw_operation_state" var2="1" />
                <action function="page">restore_done</action>
            </object>

            <object type="action">
                <action function="nandroid">restore</action>
            </object>
        </page>

        <page name="restore_done">
            <object type="action">
                <condition var1="tw_operation_status" var2="0" />
                <action function="page">restore_success</action>
            </object>

            <object type="action">
                <condition var1="tw_operation_status" var2="1" />
                <action function="page">restore_failed</action>
            </object>
        </page>

        <page name="restore_success">
            <background color="black" />

            <object type="text" color="white">
                <font resource="header" />
                <placement x="100" y="15" />
                <text>Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="20" />
                <text>Team Win Recovery Project (twrp)  v%tw_version%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="50" />
                <text>Based on Android System Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="75" />
                <text>Battery Level: %tw_battery%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="650" y="75" />
                <text>%tw_time%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="20" y="200" />
                <text>Your restore was successful!</text>
            </object>

            <object type="button">
                <placement x="20" y="350" />
                <font resource="font" color="white" />
                <text>Main Menu</text>
                <image resource="main_button" />
                <action function="page">main</action>
            </object>
        </page>

        <page name="restore_failed">
            <background color="black" />

            <object type="text" color="white">
                <font resource="header" />
                <placement x="100" y="15" />
                <text>Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="20" />
                <text>Team Win Recovery Project (twrp)  v%tw_version%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="50" />
                <text>Based on Android System Recovery</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="400" y="75" />
                <text>Battery Level: %tw_battery%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="650" y="75" />
                <text>%tw_time%</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="20" y="200" />
                <text>Your restore failed.</text>
            </object>

            <object type="text" color="white">
                <font resource="font" />
                <placement x="20" y="250" />
                <text>Pull up the console for more details</text>
            </object>

            <object type="button">
                <placement x="20" y="350" />
                <font resource="font" color="white" />
                <text>Main Menu</text>
                <image resource="main_button" />
                <action function="page">main</action>
            </object>

            <object type="console">
                <slideout resource="slideout" x="482" y="560" />
                <placement x="0" y="0" w="1024" h="600" />
                <color foreground="#B0B0B0" background="black" scroll="black" />
                <font resource="fixed" />
            </object>
        </page>

    </pages>
</recovery>

